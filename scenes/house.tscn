[gd_scene load_steps=17 format=4 uid="uid://c7pa820fu0ro5"]

[ext_resource type="Material" uid="uid://dm4rlevqxr3m8" path="res://settings/game_shader.tres" id="1_aa1ca"]
[ext_resource type="Script" path="res://scenes/house.gd" id="1_gbk0d"]
[ext_resource type="TileSet" uid="uid://1do7ydqohww" path="res://settings/tileset.tres" id="1_k54kn"]
[ext_resource type="PackedScene" uid="uid://xg6evqvx3gc1" path="res://scenes/miner.tscn" id="2_v5ldq"]
[ext_resource type="Texture2D" uid="uid://dkrfphw8ydgar" path="res://assets/rock_tilesheet.png" id="3_j1upx"]
[ext_resource type="Script" path="res://scenes/boss.gd" id="4_08ycj"]
[ext_resource type="PackedScene" uid="uid://blsb5no04kqj4" path="res://scenes/on_screen_ui.tscn" id="7_vtgd4"]
[ext_resource type="PackedScene" uid="uid://0b8v22uc4rk6" path="res://scenes/trigger.tscn" id="8_06wa3"]

[sub_resource type="AtlasTexture" id="AtlasTexture_12xcp"]
atlas = ExtResource("3_j1upx")
region = Rect2(96, 8, 8, 8)

[sub_resource type="AtlasTexture" id="AtlasTexture_bprtv"]
atlas = ExtResource("3_j1upx")
region = Rect2(96, 8, 8, 8)

[sub_resource type="AtlasTexture" id="AtlasTexture_t56p1"]
atlas = ExtResource("3_j1upx")
region = Rect2(104, 8, 8, 8)

[sub_resource type="AtlasTexture" id="AtlasTexture_y1m1l"]
atlas = ExtResource("3_j1upx")
region = Rect2(96, 8, 8, 8)

[sub_resource type="AtlasTexture" id="AtlasTexture_3cy35"]
atlas = ExtResource("3_j1upx")
region = Rect2(112, 8, 8, 8)

[sub_resource type="SpriteFrames" id="SpriteFrames_6tswa"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_12xcp")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_bprtv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_t56p1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y1m1l")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3cy35")
}],
"loop": true,
"name": &"walk",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5p7wo"]
size = Vector2(8, 10)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_x0eod"]

[node name="House" type="Node2D" node_paths=PackedStringArray("player", "ui")]
material = ExtResource("1_aa1ca")
use_parent_material = true
scale = Vector2(8, 8)
script = ExtResource("1_gbk0d")
player = NodePath("Miner")
ui = NodePath("CanvasLayer")

[node name="TileMapLayer" type="TileMapLayer" parent="."]
use_parent_material = true
tile_map_data = PackedByteArray("AAAAAAAAAAAEAAUAAAAAAAEAAAAEAAUAAAAAAAIAAAAEAAUAAAAAAAMAAAAEAAUAAAAAAAQAAAAEAAUAAAAAAAUAAAAEAAUAAAAAAAYAAAAEAAUAAAAAAAcAAAAEAAUAAAAAAAgAAAAEAAUAAAAAAAkAAAAEAAUAAAAAAAoAAAAEAAUAAAAAAAsAAAAEAAUAAAABAAAAAAAEAAUAAAABAAEAAAAEAAUAAAABAAIAAAAEAAUAAAABAAMAAAAEAAUAAAABAAQAAAAEAAUAAAABAAUAAAAEAAUAAAABAAYAAAAEAAUAAAABAAcAAAAEAAUAAAABAAgAAAAEAAUAAAABAAkAAAAEAAUAAAABAAoAAAAEAAUAAAABAAsAAAAEAAUAAAACAAAAAAAEAAUAAAACAAEAAAAEAAUAAAACAAIAAAAEAAUAAAACAAMAAAAEAAUAAAACAAQAAAAEAAUAAAACAAUAAAAEAAUAAAACAAYAAAAEAAUAAAACAAcAAAAEAAUAAAACAAgAAAAEAAUAAAACAAkAAAAEAAUAAAACAAoAAAAEAAUAAAACAAsAAAAEAAUAAAADAAAAAAAEAAUAAAADAAEAAAAEAAUAAAADAAIAAAAEAAUAAAADAAMAAAAEAAUAAAADAAQAAAAEAAUAAAADAAUAAAAEAAUAAAADAAYAAAAGAAQAAAADAAcAAAAGAAQAAAADAAgAAAAFAAQAAAADAAkAAAAFAAQAAAADAAoAAAAFAAUAAAADAAsAAAAEAAUAAAAEAAAAAAAEAAUAAAAEAAEAAAAEAAUAAAAEAAIAAAAEAAUAAAAEAAMAAAAEAAUAAAAEAAQAAAAEAAUAAAAEAAUAAAAHAAQAAAAEAAYAAAAGAAQAAAAEAAcAAAAFAAQAAAAEAAgAAAAFAAQAAAAEAAkAAAAFAAQAAAAEAAoAAAAFAAUAAAAEAAsAAAAEAAUAAAAFAAAAAAAEAAUAAAAFAAEAAAAEAAUAAAAFAAIAAAAEAAUAAAAFAAMAAAAEAAUAAAAFAAQAAAAIAAQAAAAFAAUAAAAGAAQAAAAFAAYAAAAFAAQAAAAFAAcAAAAFAAQAAAAFAAgAAAAEAAQAAAAFAAkAAAAEAAQAAAAFAAoAAAAFAAUAAAAFAAsAAAAEAAUAAAAGAAAAAAAEAAUAAAAGAAEAAAAEAAUAAAAGAAIAAAAEAAUAAAAGAAMAAAAIAAQAAAAGAAQAAAAHAAQAAAAGAAUAAAAFAAQAAAAGAAYAAAAFAAQAAAAGAAcAAAAEAAQAAAAGAAgAAAAEAAQAAAAGAAkAAAAEAAQAAAAGAAoAAAAFAAUAAAAGAAsAAAAEAAUAAAAHAAAAAAAEAAUAAAAHAAEAAAAEAAUAAAAHAAIAAAAEAAUAAAAHAAMAAAAHAAQAAAAHAAQAAAAGAAQAAAAHAAUAAAAGAAQAAAAHAAYAAAAFAAQAAAAHAAcAAAAFAAQAAAAHAAgAAAAEAAQAAAAHAAkAAAAFAAQAAAAHAAoAAAAFAAUAAAAHAAsAAAAEAAUAAAAIAAAAAAAEAAUAAAAIAAEAAAAEAAUAAAAIAAIAAAAEAAUAAAAIAAMAAAAHAAQAAAAIAAQAAAAGAAQAAAAIAAUAAAAFAAQAAAAIAAYAAAAFAAQAAAAIAAcAAAAFAAQAAAAIAAgAAAAFAAQAAAAIAAkAAAAEAAQAAAAIAAoAAAAFAAUAAAAIAAsAAAAEAAUAAAAJAAAAAAAEAAUAAAAJAAEAAAAEAAUAAAAJAAIAAAAEAAUAAAAJAAMAAAAGAAQAAAAJAAQAAAAGAAQAAAAJAAUAAAAFAAQAAAAJAAYAAAAFAAQAAAAJAAcAAAAFAAQAAAAJAAgAAAAFAAQAAAAJAAkAAAAEAAQAAAAJAAoAAAAFAAUAAAAJAAsAAAAEAAUAAAAKAAAAAAAEAAUAAAAKAAEAAAAEAAUAAAAKAAIAAAAEAAUAAAAKAAMAAAAGAAQAAAAKAAQAAAAFAAQAAAAKAAUAAAAFAAQAAAAKAAYAAAAFAAQAAAAKAAcAAAAFAAQAAAAKAAgAAAAFAAQAAAAKAAkAAAAFAAQAAAAKAAoAAAAFAAUAAAAKAAsAAAAEAAUAAAALAAAAAAAEAAUAAAALAAEAAAAEAAUAAAALAAIAAAAEAAUAAAALAAMAAAAGAAQAAAALAAQAAAAFAAQAAAALAAUAAAAFAAQAAAALAAYAAAAFAAQAAAALAAcAAAAFAAQAAAALAAgAAAAFAAQAAAALAAkAAAAEAAQAAAALAAoAAAAFAAUAAAALAAsAAAAEAAUAAAAMAAAAAAAEAAUAAAAMAAEAAAAEAAUAAAAMAAIAAAAEAAUAAAAMAAMAAAAGAAQAAAAMAAQAAAAFAAQAAAAMAAUAAAAFAAQAAAAMAAYAAAAFAAQAAAAMAAcAAAAFAAQAAAAMAAgAAAAEAAQAAAAMAAkAAAAEAAQAAAAMAAoAAAAFAAUAAAAMAAsAAAAEAAUAAAANAAAAAAAEAAUAAAANAAEAAAAEAAUAAAANAAIAAAAEAAUAAAANAAMAAAAGAAQAAAANAAQAAAAGAAQAAAANAAUAAAAFAAQAAAANAAYAAAAFAAQAAAANAAcAAAAEAAQAAAANAAgAAAAEAAQAAAANAAkAAAAEAAQAAAANAAoAAAAFAAUAAAANAAsAAAAEAAUAAAAOAAAAAAAEAAUAAAAOAAEAAAAEAAUAAAAOAAIAAAAEAAUAAAAOAAMAAAAHAAQAAAAOAAQAAAAGAAQAAAAOAAUAAAAFAAQAAAAOAAYAAAAFAAQAAAAOAAcAAAAEAAQAAAAOAAgAAAAEAAQAAAAOAAkAAAAEAAQAAAAOAAoAAAAFAAUAAAAOAAsAAAAEAAUAAAAPAAAAAAAEAAUAAAAPAAEAAAAEAAUAAAAPAAIAAAAEAAUAAAAPAAMAAAAHAAQAAAAPAAQAAAAGAAQAAAAPAAUAAAAGAAQAAAAPAAYAAAAFAAQAAAAPAAcAAAAFAAQAAAAPAAgAAAAEAAQAAAAPAAkAAAAEAAQAAAAPAAoAAAAFAAUAAAAPAAsAAAAEAAUAAAAQAAAAAAAEAAUAAAAQAAEAAAAEAAUAAAAQAAIAAAAEAAUAAAAQAAMAAAAIAAQAAAAQAAQAAAAHAAQAAAAQAAUAAAAFAAQAAAAQAAYAAAAFAAQAAAAQAAcAAAAEAAQAAAAQAAgAAAAEAAQAAAAQAAkAAAAEAAQAAAAQAAoAAAAFAAUAAAAQAAsAAAAEAAUAAAARAAAAAAAEAAUAAAARAAEAAAAEAAUAAAARAAIAAAAEAAUAAAARAAMAAAAEAAUAAAARAAQAAAAGAAQAAAARAAUAAAAFAAQAAAARAAYAAAAFAAQAAAARAAcAAAAFAAQAAAARAAgAAAAEAAQAAAARAAoAAAAFAAUAAAARAAsAAAAEAAUAAAASAAAAAAAEAAUAAAASAAEAAAAEAAUAAAASAAIAAAAEAAUAAAASAAMAAAAEAAUAAAASAAQAAAAEAAUAAAASAAUAAAAFAAQAAAASAAYAAAAFAAQAAAASAAcAAAAEAAQAAAASAAgAAAAEAAQAAAASAAkAAAAEAAQAAAASAAoAAAAFAAUAAAASAAsAAAAEAAUAAAATAAAAAAAEAAUAAAATAAEAAAAEAAUAAAATAAIAAAAEAAUAAAATAAMAAAAEAAUAAAATAAQAAAAEAAUAAAATAAUAAAAEAAUAAAATAAYAAAAFAAQAAAATAAcAAAAEAAQAAAATAAgAAAAFAAQAAAATAAkAAAAFAAQAAAATAAoAAAAFAAUAAAATAAsAAAAEAAUAAAAUAAAAAAAEAAUAAAAUAAEAAAAEAAUAAAAUAAIAAAAEAAUAAAAUAAMAAAAEAAUAAAAUAAQAAAAEAAUAAAAUAAUAAAAEAAUAAAAUAAYAAAAEAAUAAAAUAAcAAAAEAAUAAAAUAAgAAAAEAAUAAAAUAAkAAAAEAAUAAAAUAAoAAAAEAAUAAAAUAAsAAAAEAAUAAAAVAAAAAAAEAAUAAAAVAAEAAAAEAAUAAAAVAAIAAAAEAAUAAAAVAAMAAAAEAAUAAAAVAAQAAAAEAAUAAAAVAAUAAAAEAAUAAAAVAAYAAAAEAAUAAAAVAAcAAAAEAAUAAAAVAAgAAAAEAAUAAAAVAAkAAAAEAAUAAAAVAAoAAAAEAAUAAAAVAAsAAAAEAAUAAAAWAAAAAAAEAAUAAAAWAAEAAAAEAAUAAAAWAAIAAAAEAAUAAAAWAAMAAAAEAAUAAAAWAAQAAAAEAAUAAAAWAAUAAAAEAAUAAAAWAAYAAAAEAAUAAAAWAAcAAAAEAAUAAAAWAAgAAAAEAAUAAAAWAAkAAAAEAAUAAAAWAAoAAAAEAAUAAAAWAAsAAAAEAAUAAAARAAkAAAAEAAQAAAA=")
tile_set = ExtResource("1_k54kn")

[node name="TileMapLayer2" type="TileMapLayer" parent="."]
use_parent_material = true
tile_map_data = PackedByteArray("AAARAAkAAAAPAAcAAAAGAAgAAAAGAAYAAAAQAAgAAAAGAAYAAAANAAkAAAAGAAcAAAAOAAkAAAAHAAcAAAAIAAkAAAAEAAcAAAAJAAkAAAAFAAcAAAATAAgAAAANAAUAAAATAAkAAAANAAYAAAA=")
tile_set = ExtResource("1_k54kn")

[node name="Miner" parent="." instance=ExtResource("2_v5ldq")]
position = Vector2(42.625, 75.375)

[node name="Boss" type="AnimatedSprite2D" parent="."]
visible = false
use_parent_material = true
position = Vector2(137, 76)
sprite_frames = SubResource("SpriteFrames_6tswa")
animation = &"walk"
flip_h = true
script = ExtResource("4_08ycj")

[node name="CanvasLayer" parent="." instance=ExtResource("7_vtgd4")]

[node name="Trigger" parent="." node_paths=PackedStringArray("target") instance=ExtResource("8_06wa3")]
collision_layer = 4
collision_mask = 4
target = NodePath("../Miner")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Trigger"]
shape = SubResource("RectangleShape2D_5p7wo")

[node name="UpgradeStation" parent="." node_paths=PackedStringArray("target") instance=ExtResource("8_06wa3")]
target = NodePath("../Miner")

[node name="CollisionShape2D" type="CollisionShape2D" parent="UpgradeStation"]
position = Vector2(-67.375, -0.25)
shape = SubResource("RectangleShape2D_x0eod")

[connection signal="target_entered" from="Trigger" to="." method="_on_trigger_target_entered"]
[connection signal="target_entered" from="UpgradeStation" to="." method="_on_upgrade_station_target_entered"]
